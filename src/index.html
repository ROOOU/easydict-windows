<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EasyDict</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <!-- Custom Title Bar -->
  <div class="titlebar" data-tauri-drag-region>
    <div class="titlebar-left">
      <div class="logo">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path
            d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"
            fill="currentColor" />
        </svg>
      </div>
      <span class="titlebar-title">EasyDict</span>
    </div>
    <div class="titlebar-actions">
      <button class="titlebar-btn pin-btn" id="pinBtn" title="置顶">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L12 22M12 2L8 6M12 2L16 6" />
        </svg>
      </button>
      <button class="titlebar-btn" id="settingsBtn" title="设置">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3" />
          <path
            d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
        </svg>
      </button>
      <button class="titlebar-btn minimize-btn" id="minimizeBtn" title="最小化">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
      </button>
      <button class="titlebar-btn close-btn" id="closeBtn" title="关闭">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content" id="mainView">
    <!-- Input Area -->
    <div class="input-section">
      <div class="lang-selector">
        <select id="sourceLang" class="lang-select">
          <option value="auto">自动检测</option>
        </select>
        <button class="swap-btn" id="swapLangBtn" title="交换语言">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16" />
          </svg>
        </button>
        <select id="targetLang" class="lang-select">
          <option value="zh-CN">简体中文</option>
        </select>
      </div>
      <div class="input-container">
        <textarea id="inputText" placeholder="输入要翻译的文本..." rows="3"></textarea>
        <div class="input-actions">
          <button class="action-btn" id="clearBtn" title="清除">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <line x1="15" y1="9" x2="9" y2="15" />
              <line x1="9" y1="9" x2="15" y2="15" />
            </svg>
          </button>
          <button class="action-btn" id="speakInputBtn" title="朗读">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
              <path d="M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07" />
            </svg>
          </button>
          <button class="action-btn" id="ocrBtn" title="截图OCR">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" />
              <circle cx="8.5" cy="8.5" r="1.5" />
              <path d="M21 15l-5-5L5 21" />
            </svg>
          </button>
          <button class="translate-btn" id="translateBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6" />
            </svg>
            翻译
          </button>
        </div>
      </div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-bar" id="loadingBar">
      <div class="loading-progress"></div>
    </div>

    <!-- Results Area -->
    <div class="results-section" id="resultsSection">
      <!-- Results will be injected here -->
    </div>
  </div>

  <!-- Settings Panel -->
  <div class="settings-panel hidden" id="settingsView">
    <div class="settings-header">
      <button class="back-btn" id="backBtn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6" />
        </svg>
      </button>
      <h2>设置</h2>
    </div>

    <div class="settings-body">
      <!-- General -->
      <div class="settings-group">
        <h3>通用</h3>
        <div class="setting-item">
          <label>主题</label>
          <select id="themeSelect" class="setting-select">
            <option value="auto">跟随系统</option>
            <option value="dark">深色</option>
            <option value="light">浅色</option>
          </select>
        </div>
        <div class="setting-item">
          <label>默认目标语言</label>
          <select id="defaultTargetLang" class="setting-select">
            <option value="zh-CN">简体中文</option>
            <option value="en">英语</option>
            <option value="ja">日语</option>
          </select>
        </div>
      </div>

      <!-- Hotkeys -->
      <div class="settings-group">
        <h3>快捷键</h3>
        <div class="setting-item">
          <label>输入翻译</label>
          <span class="hotkey-badge">Alt + A</span>
        </div>
        <div class="setting-item">
          <label>划词翻译</label>
          <span class="hotkey-badge">Alt + D</span>
        </div>
        <div class="setting-item">
          <label>截图翻译</label>
          <span class="hotkey-badge">Alt + S</span>
        </div>
      </div>

      <!-- Select-to-translate -->
      <div class="settings-group">
        <h3>划词翻译</h3>
        <div class="setting-item">
          <label>启用剪贴板监听</label>
          <label class="toggle">
            <input type="checkbox" id="selectTranslateEnabled" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label>触发方式</label>
          <select id="selectTranslateMode" class="setting-select">
            <option value="icon">显示图标 (鼠标点击触发)</option>
            <option value="auto">自动翻译 (选中即翻译)</option>
            <option value="hotkey">仅快捷键 (Alt+D)</option>
          </select>
        </div>
        <p class="service-desc" style="margin-top: 4px; padding: 0 4px;">
          启用后，复制文本时会根据触发方式自动触发翻译。<br>
          「显示图标」模式会在光标附近显示翻译按钮，点击后翻译。<br>
          「自动翻译」模式会直接翻译复制的文本。
        </p>
      </div>

      <!-- Translation Services -->
      <div class="settings-group">
        <h3>翻译服务</h3>

        <!-- Google -->
        <div class="service-item">
          <div class="service-header">
            <div class="service-info">
              <span class="service-icon google">G</span>
              <span class="service-name">Google 翻译</span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="googleEnabled" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <p class="service-desc">免费，无需 API Key</p>
        </div>

        <!-- Bing -->
        <div class="service-item">
          <div class="service-header">
            <div class="service-info">
              <span class="service-icon bing">B</span>
              <span class="service-name">Bing 翻译</span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="bingEnabled" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <p class="service-desc">免费，无需 API Key</p>
        </div>

        <!-- DeepL -->
        <div class="service-item">
          <div class="service-header">
            <div class="service-info">
              <span class="service-icon deepl">D</span>
              <span class="service-name">DeepL</span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="deeplEnabled">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="service-config" id="deeplConfig">
            <input type="password" id="deeplApiKey" placeholder="DeepL API Key" class="setting-input" />
          </div>
        </div>

        <!-- Baidu -->
        <div class="service-item">
          <div class="service-header">
            <div class="service-info">
              <span class="service-icon baidu">百</span>
              <span class="service-name">百度翻译</span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="baiduEnabled">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="service-config" id="baiduConfig">
            <input type="text" id="baiduAppId" placeholder="APP ID" class="setting-input" />
            <input type="password" id="baiduSecretKey" placeholder="密钥" class="setting-input" />
          </div>
        </div>

        <!-- OpenAI / Custom LLM -->
        <div class="service-item">
          <div class="service-header">
            <div class="service-info">
              <span class="service-icon ai">AI</span>
              <span class="service-name">AI 翻译 (OpenAI)</span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="openaiEnabled">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="service-config" id="openaiConfig">
            <input type="password" id="openaiApiKey" placeholder="API Key" class="setting-input" />
            <input type="text" id="openaiApiUrl" placeholder="API URL" class="setting-input"
              value="https://api.openai.com/v1/chat/completions" />
            <input type="text" id="openaiModel" placeholder="模型名称" class="setting-input" value="gpt-4o-mini" />
          </div>
        </div>
      </div>

      <button class="save-settings-btn" id="saveSettingsBtn">保存设置</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>

</html>